(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{10033:function(e,t,a){Promise.resolve().then(a.t.bind(a,53054,23)),Promise.resolve().then(a.t.bind(a,44193,23)),Promise.resolve().then(a.bind(a,19683)),Promise.resolve().then(a.bind(a,39098))},19683:function(e,t,a){"use strict";a.r(t),a.d(t,{Container:function(){return Container}});var n=a(57437),l=a(18022),o=a.n(l),s=a(93505),r=a(20548),c=a(80568),i=a(35859),d=a(74548),u=a.n(d);function DateInput(e){let{label:t,mode:a,value:l}=e;return(0,n.jsxs)("div",{className:"form-control flex",children:[(0,n.jsx)("label",{className:"label p-0",children:(0,n.jsx)("span",{className:"label-text",children:t})}),(0,n.jsx)(c.Z,{..."time"===a?{showTime:!0,format:"DD/MM/YYYY HH:mm",showNow:!1}:{format:"MMM YYYY",picker:"month"},value:u()(l),locale:i.Z,allowClear:!1,className:"input input-bordered date-picker"})]})}a(2265),a(62508),a(88538),a(88925);var x=a(90813),m=a(56120),h=a(38941),f=a(3742);function TextareaInput(e){let{id:t,label:a,placeholder:l,value:o,maxLength:s,onChange:r}=e,c=(0,f.A)({maxLength:s,onChange:r});return(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{className:"label p-0",children:(0,n.jsx)("span",{className:"label-text",children:a})}),(0,n.jsx)("textarea",{id:t,placeholder:l||a,maxLength:300,className:"input input-bordered mt-2 h-24 py-3 resize-none",value:o,onChange:e=>c(e.target.value)})]})}var j=a(98229),b=a(23930),v=a(71287);let p=Object.values(r.bd),AddTransaction=()=>{let{data:e,setData:t,active:a,setActive:l,showAdvancedConfig:o,setShowAdvancedConfig:c,readyToCreate:i}=(0,b.f$)(),close=()=>{l(!1),c(!1)};return(0,n.jsxs)("div",{className:"absolute bottom-0 z-50 h-[100dvh] w-full overflow-auto ".concat(a?"":"hidden"),children:[(0,n.jsx)("div",{className:"absolute top-0 w-full bg-shadow min-h-[100dvh]",onClick:()=>close()}),(0,n.jsxs)("form",{className:"absolute bottom-0 max-h-[90dvh] z-50 w-full bg-base-100 rounded-t-lg container-padding overflow-auto",children:[(0,n.jsx)(m.l,{label:"Tipo de transa\xe7\xe3o",toBeSelectedLabel:"Selecione o tipo de transa\xe7\xe3o",value:e.type,fieldNames:{id:"value",color:"color",label:"label",icon:"icon"},data:[{color:s.O.red,value:v.b.OUT,label:"Sa\xedda",icon:"upload"},{color:s.O.green,value:v.b.IN,label:"Entrada",icon:"download"},{color:s.O.yellow,value:v.b.TRANSFER,label:"Transfer\xeancia",icon:"transfer"}],onChange:e=>t("type",e)}),(0,n.jsx)(j.T,{}),[v.b.IN,v.b.OUT].includes(e.type)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.l,{label:"Categoria",toBeSelectedLabel:"Selecione a categoria",value:e.categoryId,data:p,fieldNames:{id:"categoryId",color:"color",label:"name",icon:"icon"},onChange:e=>t("categoryId",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(x.P,{label:"Valor",value:e.value,onChange:e=>t("value",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(m.l,{label:"M\xe9todo de pagamento",toBeSelectedLabel:"Selecione o m\xe9todo de pagamento",value:e.paymentMethodId,data:Object.values(r._u),fieldNames:{id:"cardId",color:"color",label:"name",iconUrl:"iconUrl"},onChange:e=>t("paymentMethodId",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(h.o,{label:"Nome",value:e.name,onChange:e=>t("name",e)})]}),e.type===v.b.TRANSFER&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.P,{label:"Valor",value:e.value,onChange:e=>t("value",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(h.o,{label:"Nome",value:e.name,onChange:e=>t("name",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(m.l,{label:"Conta de origem",toBeSelectedLabel:"Selecione a conta de origem",value:e.bankAccountFromId,data:Object.values(r.rM),fieldNames:{id:"bankAccountId",color:"color",label:"name",iconUrl:"iconUrl"},onChange:e=>t("bankAccountFromId",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(m.l,{label:"Conta de destino",toBeSelectedLabel:"Selecione a conta de destino",value:e.bankAccountToId,data:Object.values(r.rM),fieldNames:{id:"bankAccountId",color:"color",label:"name",iconUrl:"iconUrl"},onChange:e=>t("bankAccountToId",e)})]}),(0,n.jsx)("div",{className:"flex flex-row justify-center w-full",children:(0,n.jsx)("button",{type:"button",className:"mt-4 underline btn btn-ghost",onClick:()=>c(e=>!e),children:"Configura\xe7\xf5es avan\xe7adas"})}),(0,n.jsxs)("div",{className:o?"":"hidden",children:[(0,n.jsx)(DateInput,{label:"Data de cria\xe7\xe3o",mode:"time",value:e.createdAt}),(0,n.jsx)(j.T,{}),(0,n.jsx)(TextareaInput,{label:"Descri\xe7\xe3o",placeholder:"M\xe1ximo de 300 caracteres",value:e.description,onChange:e=>t("description",e)}),(0,n.jsx)(j.T,{}),(0,n.jsx)(DateInput,{label:"Entrar no or\xe7amento do m\xeas",mode:"month",value:e.budget})]}),(0,n.jsxs)("div",{className:"flex flex-col justify-center w-full",children:[(0,n.jsx)("button",{type:"submit",className:"mt-4 btn btn-primary",disabled:!i,children:"Cadastrar transa\xe7\xe3o"}),(0,n.jsx)("button",{type:"button",className:"mt-4 btn btn-error",onClick:()=>close(),children:"Cancelar"})]})]})]})};var N=a(61396),g=a.n(N),w=a(24033),y=a(24606),C=a(53159),T=a(89348);let NavBar=()=>{let e=(0,w.usePathname)(),{setActive:t}=(0,b.f$)();return(0,n.jsxs)("div",{className:"navbar bg-primary flex justify-around text-3xl",children:[(0,n.jsxs)(g(),{className:"tooltip flex flex-col justify-center ".concat("/orcamento"===e?"text-white":""),"data-tip":"Or\xe7amento",href:"/orcamento",children:[(0,n.jsx)(C.a_$,{}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"Or\xe7amento"})]}),(0,n.jsxs)(g(),{className:"tooltip flex flex-col justify-center ".concat("/"===e?"text-white":""),"data-tip":"Home",href:"/",children:[(0,n.jsx)(y.SX3,{}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"Home"})]}),(0,n.jsx)("button",{className:"tooltip rounded-full bg-secondary text-secondary-content w-16 h-16 flex justify-center align-center","data-tip":"Adicionar transa\xe7\xe3o",style:{marginTop:"-2rem",fontSize:"2rem"},onClick:()=>t(!0),children:(0,n.jsx)(C.wEH,{})}),(0,n.jsxs)(g(),{className:"tooltip flex flex-col justify-center ".concat("/carteira"===e?"text-white":""),"data-tip":"Carteira",href:"/carteira",children:[(0,n.jsx)(T.GyN,{}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"Carteira"})]}),(0,n.jsxs)(g(),{className:"tooltip flex flex-col justify-center ".concat("/ajustes"===e?"text-white":""),"data-tip":"Ajustes",href:"/ajustes",children:[(0,n.jsx)(y.b4S,{}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"Ajustes"})]})]})},Footer=()=>(0,n.jsx)("div",{className:"sticky bottom-0 z-40",children:(0,n.jsx)(NavBar,{})}),Container=e=>{let{children:t}=e,{active:a}=(0,b.f$)();return(0,n.jsxs)("div",{className:"".concat(o().className," relative h-[100dvh] ").concat(a?"overflow-hidden":""),children:[t,(0,n.jsx)(Footer,{}),(0,n.jsx)(AddTransaction,{})]})}},23930:function(e,t,a){"use strict";a.d(t,{TD:function(){return AddTransactionProvider},f$:function(){return useAddTransaction}});var n=a(57437),l=a(3742),o=a(2265),s=a(71287),r=a(38651);let c=(0,o.createContext)({}),genDefaultData=()=>({type:s.b.OUT,value:0,name:"",createdAt:new Date,description:"",budget:new Date("".concat((0,r.a2)(),"-01"))}),AddTransactionProvider=e=>{let{children:t}=e,[a,s]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),[x,m]=(0,o.useState)(genDefaultData()),h=(0,l.U)({setState:m,execBeforeSet:e=>{e.categoryId&&e.value>0&&e.paymentMethodId&&u(!0)}});return(0,n.jsx)(c.Provider,{value:{active:a,setActive:e=>{e?s(!0):(i(!1),m(genDefaultData()),s(!1))},showAdvancedConfig:r,setShowAdvancedConfig:i,readyToCreate:d,data:x,setData:h},children:t})},useAddTransaction=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useAddTransaction must be used within a AddTransactionProvider");return e}},65966:function(e,t,a){"use strict";a.d(t,{H:function(){return AuthProvider},V:function(){return c}});var n=a(57437),l=a(47713),o=a(2265),s=a(62601);let r=s.env.NEXT_PUBLIC_API_URL,c=(0,o.createContext)({}),AuthProvider=e=>{let{children:t}=e,[a,s]=(0,o.useState)(void 0);return((0,o.useEffect)(()=>{let userFetch=async e=>{try{let t=await fetch("".concat(r,"/accounts/iam"),{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();s(a)}catch(e){console.log(e)}},e=(0,l.getCookie)("token");if(e){userFetch(e);return}s(null)},[]),void 0===a)?(0,n.jsx)("main",{className:"flex justify-center w-full min-h-[100dvh]",children:(0,n.jsx)("section",{className:"flex items-center justify-center w-full max-w-7xl container-padding",children:(0,n.jsxs)("div",{className:"card w-full max-w-md flex-shrink-0 xs:bg-base-200 xs:shadow-md container-padding",children:[(0,n.jsx)("header",{className:"card-body flex items-center justify-center w-full mb-8",children:(0,n.jsx)("h2",{className:"card-title text-3xl text-center",children:"Econominhas"})}),(0,n.jsx)("div",{className:"flex items-center justify-center flex-col",children:(0,n.jsx)("progress",{className:"progress w-56"})})]})})}):(0,n.jsx)(c.Provider,{value:{user:a,logout:()=>{(0,l.deleteCookie)("token"),s(null)}},children:t})}},39098:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return providers}});var n=a(57437),l=a(91863),o=a(70165),s=a(57021),r=a(65966),c=a(60414),i=a(2265);let d=(0,i.createContext)({}),PwaProvider=e=>{let{children:t}=e,[a,l]=(0,i.useState)(),[o,s]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let handleBeforeInstallPrompt=e=>{e.preventDefault(),l(e)};return window.addEventListener("beforeinstallprompt",handleBeforeInstallPrompt),sessionStorage.getItem("hide-pwa-popup")&&s(!0),()=>{window.removeEventListener("beforeinstallprompt",handleBeforeInstallPrompt)}},[]),(0,i.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches||c(!1)},[]),(0,n.jsx)(d.Provider,{value:{pwaPrompt:a,hasInstalledPwa:r,hidePwaPopUp:o,setHidePwaPopUp:e=>{sessionStorage.setItem("hide-pwa-popup","true"),s(e)},setHasInstalledPwa:c},children:t})};var u=a(63014),x=a(23930),providers=function(e){let{children:t}=e,[a]=i.useState(new l.S({defaultOptions:{queries:{staleTime:144e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}}));return(0,n.jsx)(r.H,{children:(0,n.jsxs)(o.aH,{client:a,children:[(0,n.jsx)(x.TD,{children:(0,n.jsx)(c.AJ,{children:(0,n.jsx)(PwaProvider,{children:t})})}),(0,n.jsx)(s.t,{initialIsOpen:!1}),(0,n.jsx)(u.Ix,{})]})})}},53054:function(){}},function(e){e.O(0,[169,582,420,447,724,351,167,572,971,864,744],function(){return e(e.s=10033)}),_N_E=e.O()}]);